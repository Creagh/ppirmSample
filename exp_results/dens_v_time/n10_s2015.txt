seed <- 2015
set.seed(seed)

num_nodes <- 10
alpha <- 1 # the parameter for the CRP
delta <- 0.3 # the shape parameter for the Gamma dist'n
beta <- 0.01 # the inverse scale (aka rate) for Gamma

a <- 0.01 # shape of Gamma hyperprior for DELTA
b <- 0.01 # rate of Gamma hyperprior for DELTA
c <- 0.01 # shape of Gamma hyperprior for BETA
d <- 0.01 # rate of Gamma hyperprior for BETA

iterations <- 10000 # number of MCMC iterations
initial_part <- 1:num_nodes # initial partition: everyone at their own table
initial_alpha <- 2
initial_delta <- 1
initial_beta <- 1

initial_part2 <- rep(1, num_nodes) # everyone at the same table
initial_part3 <- crp(num_nodes, alpha) # draw a random partition from prior

first <- 0.5 # the smallest stopping time
last <- 301 # the largest stopping time
by <- 2 # the amount to increase by each time
cutoff <- 0.1 # cutoff time for test data (everything after cutoff used for training)

> sum - sum2 # number of max training transactions
[1] 816050
> sum2 # number of test transactions
[1] 270

[1] 310332 transactions by T=114.5

"avg_dens" "T"
508.274814313789 0.5
511.921347702477 2.5
511.862678136508 4.5
512.249749423385 6.5
512.345801527357 8.5
512.19645397299 10.5
512.152931457377 12.5
512.047924373556 14.5
512.254066393193 16.5
512.355459741516 18.5
512.47473191723 20.5
512.429592958356 22.5
512.490728251127 24.5
512.396815122704 26.5
512.36275169709 28.5
512.323090332887 30.5
512.313141909519 32.5
512.30055312985 34.5
512.341035118398 36.5
512.369146347289 38.5
512.45915791722 40.5
512.312239460768 42.5
512.310229229422 44.5
512.313962315012 46.5
512.335029914045 48.5
512.363425565433 50.5
512.355699816072 52.5
512.33872613212 54.5
512.393705682517 56.5
512.383579832142 58.5
512.404026502427 60.5
512.432280237552 62.5
512.458616152839 64.5
512.462271841118 66.5
512.446065555567 68.5
512.448554436977 70.5
512.457732095893 72.5
512.478713221741 74.5
512.508454108729 76.5
512.544742916122 78.5
512.525929883385 80.5
512.556834270868 82.5
512.573416527077 84.5
512.607063760401 86.5
512.607265597925 88.5
512.583325118789 90.5
512.582131978966 92.5
512.574871179349 94.5
512.592569966061 96.5
512.55546253508 98.5
512.583614051468 100.5
512.61714383435 102.5
512.620717782951 104.5
512.665752953083 106.5
512.66503960239 108.5
512.714749704065 110.5
512.727640684279 112.5
512.751724220851 114.5
512.748765581707 116.5
512.732808756704 118.5
512.727217418157 120.5
512.729270958873 122.5
512.724165828176 124.5
512.722443247274 126.5
512.705680474703 128.5
512.708436176988 130.5
512.698031656599 132.5
512.71427249778 134.5
512.716556968849 136.5
512.721223197304 138.5
512.696953019084 140.5
512.700547841741 142.5
512.700394977446 144.5
512.714229657805 146.5
512.705605083488 148.5
512.711141979681 150.5
512.713308343977 152.5
512.72896225226 154.5
512.710141762413 156.5
512.691403450179 158.5
512.678270966055 160.5
512.676580706076 162.5
512.688049670827 164.5
512.689436533056 166.5
512.671056587611 168.5
512.657999512548 170.5
512.64554642227 172.5
512.645487305815 174.5
512.647423019774 176.5
512.669869430674 178.5
512.669413215623 180.5
512.664819923438 182.5
512.687700088963 184.5
512.707729337312 186.5
512.694447313063 188.5
512.718736979837 190.5
512.717545616074 192.5
512.711036312349 194.5
512.705153697132 196.5
512.702904970619 198.5
512.72045860668 200.5
512.72819783068 202.5
512.733457511369 204.5
512.732627768348 206.5
512.722095247588 208.5
512.721104137636 210.5
512.714788677403 212.5
512.721248357497 214.5
512.712596885438 216.5
512.703184253586 218.5
512.699130595818 220.5
512.708199908118 222.5
512.723940056733 224.5
512.725697162469 226.5
512.734533980017 228.5
512.721738975336 230.5
512.720474775829 232.5
512.722540473394 234.5
512.731934432426 236.5
512.736329855335 238.5
512.724724017961 240.5
512.740660984752 242.5
512.743900679318 244.5
512.740918304699 246.5
512.736547234821 248.5
512.741062997552 250.5
512.744420512861 252.5
512.74358168001 254.5
512.736913559727 256.5
512.742284344524 258.5
512.739520933408 260.5
512.730418062305 262.5
512.731430513982 264.5
512.722414109342 266.5
512.725200859769 268.5
512.734874439664 270.5
512.73059570942 272.5
512.735680198295 274.5
512.727254915552 276.5
512.730944358285 278.5
512.731452828577 280.5
512.728436911013 282.5
512.740772118125 284.5
512.734580655901 286.5
512.746285295041 288.5
512.745764167783 290.5
512.738900129508 292.5
512.746004144899 294.5
512.75032096814 296.5
512.753189731439 298.5
512.750483787108 300.5
